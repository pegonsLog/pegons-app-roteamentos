<div class="container-fluid py-4">
  <!-- Título Principal -->
  <div class="mb-4">
    <h2 class="display-6">
      <i class="bi bi-list-check me-2"></i>
      Lista de Atendimento
    </h2>
    <p class="text-muted">Visualize todos os registros organizados por turno</p>
  </div>

  <!-- Mensagem de Erro -->
  @if (errorMessage()) {
    <div class="alert alert-danger alert-dismissible fade show" role="alert">
      <i class="bi bi-exclamation-triangle-fill me-2"></i>
      {{ errorMessage() }}
    </div>
  }

  <!-- Loading -->
  @if (isLoading()) {
    <div class="text-center py-5">
      <div class="spinner-border text-primary" role="status">
        <span class="visually-hidden">Carregando...</span>
      </div>
      <p class="mt-3 text-muted">Carregando turnos...</p>
    </div>
  }

  <!-- Resumo -->
  @if (!isLoading() && turnos().length > 0) {
    <div class="card shadow-sm mb-4">
      <div class="card-body">
        <div class="row text-center">
          <div class="col-md-6">
            <h3 class="text-primary mb-0">{{ turnos().length }}</h3>
            <p class="text-muted mb-0">Turnos Ativos</p>
          </div>
          <div class="col-md-6">
            <h3 class="text-success mb-0">{{ getTotalRegistros() }}</h3>
            <p class="text-muted mb-0">Total de Registros</p>
          </div>
        </div>
      </div>
    </div>
  }

  <!-- Lista de Turnos -->
  @if (!isLoading() && turnos().length > 0) {
    @for (turno of turnos(); track turno.nome) {
      <div class="card shadow-sm mb-4">
        <div class="card-header" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%); color: white;">
          <h4 class="mb-0">
            <i class="bi bi-clock-fill me-2"></i>
            {{ turno.nome }}
            <span class="badge bg-light text-dark ms-2">{{ turno.registros.length }} registro(s)</span>
          </h4>
        </div>
        <div class="card-body">
          <div class="table-responsive">
            <table class="table table-hover">
              <thead style="background-color: #f8f9fa;">
                <tr>
                  <th>#</th>
                  <th>Nome</th>
                  <th>Endereço</th>
                  <th>Nível Atendimento</th>
                </tr>
              </thead>
              <tbody>
                @for (registro of turno.registros; track registro.id; let i = $index) {
                  <tr>
                    <td>{{ i + 1 }}</td>
                    <td>
                      <strong>{{ registro.nome }}</strong>
                    </td>
                    <td>{{ registro.endereco }}</td>
                    <td>
                      @if (registro.nivelAtendimento === 'Atend. Pleno') {
                        <span class="badge bg-success">Pleno</span>
                      } @else if (registro.nivelAtendimento === 'Atend. Misto') {
                        <span class="badge bg-warning text-dark">Misto</span>
                      } @else {
                        <span class="badge bg-secondary">A Definir</span>
                      }
                    </td>
                  </tr>
                }
              </tbody>
            </table>
          </div>
        </div>
      </div>
    }
  }

  <!-- Mensagem quando não há dados -->
  @if (!isLoading() && turnos().length === 0) {
    <div class="alert alert-info text-center">
      <i class="bi bi-info-circle me-2"></i>
      Nenhum turno com registros encontrado no Firestore.
    </div>
  }
</div>
